{% extends "homebase.html" %}
{% block title %} 注册——晴天网 {% endblock %}
{% block css %}
<link rel="stylesheet" type="text/css" href="/static/css/userform.css">
{% endblock %}
{% block content %}
<div class="container" id="userform">
<div class="container", id="form">
<form action="/users/newuser/" method="post">
{% csrf_token %}
  <div class="form-group">
  {% if form.errors %}
    <p style="color: red;"> 请修改下列错误</p>
  {% endif %}
  {{ form.username.errors }}
    <label for="exampleInputUsername">用户名</label>
    <input type="text" class="form-control" id="exampleInputUsername" placeholder="请输入用户名", name="username">
  </div>
  <div class="form-group">
  {{ form.password.errors }}
    <label for="exampleInputPassword1">密码</label>
    <input type="password" class="form-control" id="exampleInputPassword1" placeholder="请输入密码", name="password">
  </div>
  <div class="form-group">
  {{ form.checkpassword.errors }}
    <label for="exampleInputPassword2">确认密码密码</label>
    <input type="password" class="form-control" id="exampleInputPassword2" placeholder="请确认密码", name="checkpassword">
  </div>
  <div class="form-group">
  {{ form.email.errors }}
    <label for="exampleInputEmail1">邮箱</label>
    <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email", name="email">
  </div>
  <button type="submit" class="btn btn-default">提交</button>
</form>
</div>
</div>
<script type="text/javascript">
    $('#exampleInputUsername').blur(function(){
      var input_name = $(this).val();
      $.ajax({
        url: "/users/testusername/",
        data: {username: input_name},
        type: "POST",
        success: function(arg){
          alert(arg)
        }
      });
    });
</script>
{% endblock %}
